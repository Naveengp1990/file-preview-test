<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Data and Notes</title>
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            padding-top: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #notes-preview {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            border-left: 5px solid #007bff;
            border-radius: .25rem;
            font-family: monospace;
            white-space: pre-wrap;
        }
        h1, h2 {
            color: #343a40;
            margin-bottom: 20px;
        }
        .table-responsive {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4 text-center">Employee Information Dashboard</h1>

        <h2 class="mt-4">Employee Table</h2>
        <div class="table-responsive">
            <table id="employee-table" class="table table-striped table-bordered table-hover">
                <thead>
                    <!-- Table headers will be populated by JavaScript -->
                </thead>
                <tbody>
                    <!-- Table data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <h2 class="mt-4">Notes Preview</h2>
        <div id="notes-preview" class="mb-4">
            Loading notes...
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        // Embedded CSV data
        const csvData = `name,age,city,salary
John Doe,28,New York,75000
Jane Smith,34,Los Angeles,82000
Bob Johnson,45,Chicago,65000
Alice Williams,29,Houston,71000
Charlie Brown,38,Phoenix,68000
David Lee,52,Philadelphia,95000
Emma Davis,31,San Antonio,73000
Frank Miller,41,San Diego,79000
Grace Wilson,27,Dallas,67000
Henry Moore,36,San Jose,88000`;

        // Embedded notes data
        const notesData = `Project Requirements Document
=============================
Version: 1.0
Date: 2025-10-14
Author: Test Team

This is a sample text file for testing file preview functionality.
The system should be able to read the first 5 lines of this file.
Each line contains important information.
Line 4: Testing proper line reading.
Line 5: This should be the last line displayed in preview.
Line 6: This line should NOT appear in the preview.
Additional content follows but won't be visible in the initial preview.`;

        document.addEventListener('DOMContentLoaded', () => {
            // --- Populate Employee Table ---
            const employeeTable = document.getElementById('employee-table');
            if (employeeTable) {
                const lines = csvData.trim().split('\n');
                if (lines.length > 0) {
                    const headers = lines[0].split(',').map(h => h.trim());
                    const tableHead = employeeTable.querySelector('thead');
                    const tableBody = employeeTable.querySelector('tbody');

                    // Clear existing content
                    tableHead.innerHTML = '';
                    tableBody.innerHTML = '';

                    // Create header row
                    const headerRow = document.createElement('tr');
                    headers.forEach(headerText => {
                        const th = document.createElement('th');
                        th.textContent = headerText;
                        headerRow.appendChild(th);
                    });
                    tableHead.appendChild(headerRow);

                    // Populate data rows
                    for (let i = 1; i < lines.length; i++) {
                        const data = lines[i].split(',').map(d => d.trim());
                        const dataRow = document.createElement('tr');
                        data.forEach(cellData => {
                            const td = document.createElement('td');
                            td.textContent = cellData;
                            dataRow.appendChild(td);
                        });
                        tableBody.appendChild(dataRow);
                    }
                } else {
                    // Handle case where CSV data is empty or malformed
                    const tableBody = employeeTable.querySelector('tbody');
                    const row = document.createElement('tr');
                    const td = document.createElement('td');
                    td.setAttribute('colspan', '4'); // Assuming 4 columns based on data
                    td.textContent = 'No employee data available.';
                    td.classList.add('text-center', 'text-muted');
                    row.appendChild(td);
                    tableBody.appendChild(row);
                }
            } else {
                console.error("Employee table element not found.");
            }

            // --- Display First Line of Notes ---
            const notesPreviewDiv = document.getElementById('notes-preview');
            if (notesPreviewDiv) {
                const firstLine = notesData.split('\n')[0];
                notesPreviewDiv.textContent = firstLine || 'No notes available.';
            } else {
                console.error("Notes preview element not found.");
            }
        });
    </script>
</body>
</html>